<?xml version="1.0" encoding="utf-8" ?>
<mdscript name="Test_Emergent_Missions" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="D:/x4_extract_2.5/libraries/md.xsd">
    <cues>
        <cue name="Init" instantiate="true">
            <conditions>
                <event_cue_signalled cue="md.Setup.GameStart" />
                <check_value value="false" />
            </conditions>
            <actions>
                <set_value name="player.entity.$MissionLimit" exact="10" />
                <set_value name="player.entity.$CurrentOffers" exact="0" />
                <!-- debug -->
                <debug_to_file text="'start'" name="'emergent.log'" directory="'missions'" append="false" />
            
            </actions>
            <cues>
                <cue name="ObjectFound" checkinterval="30s" instantiate="true">
                    <conditions>
                        <check_value value="player.entity.$MissionLimit gt player.entity.$CurrentOffers" />
                    </conditions>
                    <actions>
                        <do_any>
                        
                            <do_all weight="100000">
                                <!-- buy large ship -->
                                <!-- <find_ship name="$Objects" space="player.sector" multiple="true" class="class.ship_l"></find_ship> -->
                                <find_station name="$Objects" space="player.sector" multiple="true"></find_station>
                                <set_value name="$Object" exact="$Objects.random" />
                                <set_value name="$Flag" exact="'Purchase'" />
                            </do_all>
                            <do_all>
                                <!-- buy station -->
                                <!-- <find_station name="$Objects" space="player.sector" multiple="true"></find_station>
                                <set_value name="$Object" exact="$Objects.random" />
                                <set_value name="$Flag" exact="'buy station'" /> -->
                            </do_all>
                            <do_all>
                                <!-- deliver encrypted message -->
                                <!-- <find_station name="$Objects" space="player.sector" multiple="true"></find_station>
                                <set_value name="$Object" exact="$Objects.random" />
                                <set_value name="$Flag" exact="'deliver'" /> -->
                            </do_all>
                            <do_all>
                                <!-- destroy station -->
                                <!-- <find_station name="$Objects" space="player.sector" multiple="true"></find_station>
                                <set_value name="$Object" exact="$Objects.random" />
                                <set_value name="$Flag" exact="'deliver'" /> -->
                            </do_all>
                            <do_all>
                                <!-- destroy large ship -->
                                <!-- <find_ship name="$Objects" space="player.sector" multiple="true"></find_ship>
                                <set_value name="$Object" exact="$Objects.random" />
                                <set_value name="$Flag" exact="'deliver'" /> -->
                            </do_all>
                            <do_all>
                                <!-- destroy fleet -->
                                <!-- <find_ship name="$Objects" space="player.sector" job="" multiple="true"></find_ship>
                                <set_value name="$Object" exact="$Objects.random" />
                                <set_value name="$Flag" exact="'deliver'" /> -->
                            </do_all>
                            <do_all>
                                <!-- buy enemy item for friend -->
                                <!-- <find_ship name="$Objects" space="player.sector" class="[class.ship_l, class.ship_xl].random" multiple="true"></find_ship>
                                <set_value name="$Object" exact="$Objects.random" />
                                <set_value name="$Flag" exact="'deliver'" /> -->
                            </do_all>
                            <do_all>
                                <!-- bring a ____ -->
                                <!-- <find_ship name="$Objects" space="player.sector" class="[class.ship_s, class.ship_m, class.ship_l, class.ship_xl].random" multiple="true"></find_ship>
                                <set_value name="$Object" exact="$Objects.random" />
                                <set_value name="$Flag" exact="'deliver'" /> -->
                            </do_all>
                            <do_all>
                                <!-- map space-->
                                <!-- <find_ship name="$Objects" space="player.sector" class="[class.ship_l, class.ship_xl].random" multiple="true"></find_ship>
                                <set_value name="$Object" exact="$Objects.random" />
                                <set_value name="$Flag" exact="'deliver'" /> -->
                            </do_all>
                        </do_any>
                        <set_value name="player.entity.$CurrentOffers" exact="1" operation="add" />
                        <!-- debug -->
                        <debug_to_file text="'ObjectFound'" name="'emergent.log'" directory="'missions'" />
                    </actions>
                    <cues>
                        <cue name="OfferSender" ref="md.Tpwar_Create_Mission_LIB.MissionLIB">
                            <param name="Object" value="$Object" />
                            <param name="Flag" value="$Flag" />
                        </cue>
                        <!-- <cue name="ResetObjectFound">
                            <delay exact="600s" />
                            <actions>
                                <reset_cue cue="this.parent" />
                            </actions>
                        </cue> -->
                    </cues>
                </cue>
            </cues>
        </cue>
    </cues>
</mdscript>
<?xml version="1.0" encoding="utf-8" ?>
<!-- <mdscript name="TPWar_Menu_LIB" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="D:/x4_extract_2.5/libraries/md.xsd"> -->
<mdscript name="TPWar_Menu_LIB" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="E:/Mod Stuff/X4 Extracted/2.5beta/libraries/md.xsd">
    <cues>
        <cue name="Init">
            <conditions>
                <event_cue_signalled cue="md.Setup.GameStart" />
                <check_value value="false" />
            </conditions>
            <actions>
                <set_value name="$TP_Menu_Table" exact="table[]" />
                <!-- debug -->
                <debug_to_file text="'start'" name="'tpmenu.log'" directory="'tpmenu'" append="false" />
                <debug_to_file text="'start'" name="'tpmenu_stock.log'" directory="'tpmenu'" append="false" />
            </actions>
            <cues>
                <cue name="TP_Menu_Controls">
                    <actions>
                        <signal_cue cue="Test_Stock" />
                    </actions>
                </cue>
                <!-- test -->
                <cue name="Test_Stock" instantiate="true">
                    <conditions>
                        <event_cue_signalled />
                    </conditions>
                    <actions>
                        <signal_cue_instantly cue="Draw_Menu" param="[[$Object], [$ReturnCue], [$Params]]" />
                        <!-- debug -->
                        <debug_to_file text="'%s | %s | %s'.[player.age, Test_Stock, if event.param? then event.param else 'no param']" name="'tpmenu_stock.log'" directory="'tpmenu'" />
                    </actions>
                </cue>
                <!-- test -->
                <!-- conversation signal -> Open_Menu -> Menu_LIB -> Menu_Type -> Menu_LIB.Draw_Menu -->
                <cue name="Open_Menu">
                    <conditions>
                        <event_player_activated_weapongroup />
                    </conditions>
                    <actions>
                        <signal_cue_instantly cue="Menu_LIB" param="Test_Stock" />
                        <!-- debug -->
                        <debug_to_file text="'%s | %s | %s'.[player.age, Open_Menu, event.param]" name="'tpmenu_stock.log'" directory="'tpmenu'" />
                    </actions>
                </cue>
                <cue name="Menu_LIB" instantiate="true" namespace="this">
                    <conditions>
                        <event_cue_signalled />
                    </conditions>
                    <actions>
                        <set_value name="$Menu_Type" exact="event.param" />
                        <signal_cue_instantly cue="$Menu_Type" />
                        <!-- debug -->
                        <debug_to_file text="'%s | %s | %s'.[player.age, Menu_LIB, event.param]" name="'tpmenu.log'" directory="'tpmenu'" />
                    </actions>
                    <cues>
                        <cue name="Draw_Menu">
                            <conditions>
                                <event_cue_signalled />
                            </conditions>
                            <actions>
                                <!-- debug -->
                                <debug_to_file text="'%s | %s | %s'.[player.age, Draw_Menu, event.param]" name="'tpmenu.log'" directory="'tpmenu'" />
                            </actions>
                        </cue>
                        <cue name="Response">

                        </cue>
                        <cue name="Draw_Denial">
                            
                        </cue>
                        <cue name="Menu_Cleanup">
                            <conditions>
                                <event_cue_signalled />
                            </conditions>
                            <actions>
                                <cancel_cue cue="Draw_Menu" />
                                <!-- debug -->
                                <debug_to_file text="'%s | %s | %s'.[player.age, Menu_Cleanup, if event.param? then event.param else 'no param']" name="'tpmenu.log'" directory="'tpmenu'" />
                            </actions>
                        </cue>
                    </cues>
                </cue>
            </cues>
        </cue>
    </cues>
</mdscript>